---
import "../styles/global.css";

const response = await fetch("https://micro.blog/posts/gilcreque", {
  method: "GET",
  headers: {
    "Content-Type": "application/json",
    Authorization: `Bearer ${import.meta.env.MICROBLOG_API_KEY}`,
  },
});

const posts = await response.json();
//console.log(posts);

const dateOptions: object = {
  year: "numeric",
  month: "long",
  day: "numeric",
};

function formatPublishDate(publishDate: string | number | Date): string {
  return new Date(publishDate).toLocaleDateString("en-US", dateOptions);
}
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta charset="utf-8" />
    <title>Gil Creque</title>
    <meta name="description" content="Technologist and Developer" />
    <meta name="author" content="Gil Creque" />

    <!-- Google Site Verification
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta
      name="google-site-verification"
      content="baTB5HjY84P_avk0rfsFGUFu6_CqqmyNZUh13QCsLM8"
    />

    <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->

    <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->

    <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="avatar-pink-tv.jpeg"
      sizes="16x16"
    />
    <link
      rel="icon"
      type="image/x-icon"
      href="avatar-pink-tv.jpeg"
      sizes="16x16"
    />
    <link rel="apple-touch-icon-precomposed" href="avatar-pink-tv.jpeg" />
  </head>
  <body
    class="bg-violet-50 dark:bg-stone-800 text-stone-800 dark:text-violet-50 max-w-3xl mx-auto"
  >
    <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->

    <header class="flex justify-center gap-1 items-center align-bottom">
      <img
        src="avatar-pink-tv.jpeg"
        alt="Gil Creque"
        height="40px"
        width="40px"
        class="rounded-full"
      />
      <p class="slab">&nbsp;Hello, I'm&nbsp;</p>
      <h1>Gil Creque</h1>
    </header>
    <main>
      <h2>About Me</h2>
      <p>
        I'm a <mark>Senior Software Engineer</mark> and <mark
          >full-stack web developer</mark
        >
        at <a href="https://www.codecraftworks.com/">Codecraft Works</a>, where
        I lead software development working on an <a
          href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=1831060&HistoricalAwards=false"
          >NSF backed</a
        > education technology platform.
      </p>
      <p>
        I am graduate of UCF (Go Knights!) but I consider myself a life-long
        learner, technologist, and tech early-adopter. I currently do work in
        Angular, Firebase, Google Cloud, ASP.NET, AWS, and STEM Education. I
        dabble in PHP (I used to primarily work in Wordpress and then Drupal),
        Python, and Java.
      </p>
    </main>
    <aside>
      <h2>Social Links</h2>
      <p>You can find me around the web:</p>
      <ul>
        <li>
          <a href="https://discord.gg/TbQEhP6HPr">Build and Run</a>, a free and
          public Discord for the tech and creative community
        </li>
        <li>
          I try to share posts through <a href="https://gilcreque.blog/"
            >my micro.blog</a
          > and I also recently joined Mastodon and you can <a
            href="https://hachyderm.io/@gilcreque">find me tooting over there</a
          >
        </li>
      </ul>
    </aside>
    <section id="microblog" set:html={}>
      <h2>Latest Micro Blog</h2>
      {
        posts.items.slice(0, 1).map((post: any) => (
          <>
            <article set:html={post.content_html}>
              <time class="slab" datetime={post.date_published}>
                {formatPublishDate(post.date_published)}
              </time>
            </article>
          </>
        ))
      }
    </section>
    <footer>
      Powered by <a href="https://astro.build/">Astro</a> and hosted on <a
        href="https://pages.github.com/">GitHub Pages</a
      >
    </footer>
  </body>
</html>
<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
